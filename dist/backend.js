module.exports=function(e){var t={};function a(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(s,n,function(t){return e[t]}.bind(null,n));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=1)}([function(e,t){e.exports=require("require3")},function(e,t,a){const s=a(2),n=a(3),i=a(5),o=a(6);e.exports=e=>{const t=a(10)(e),r=a(51)(e),c=a(57)(e),m=a(61)(e);return{routes:t,services:r,models:c,config:s,locales:n,errors:i,middlewares:o,meta:m}}},function(e,t){e.exports=e=>{const t={};return"unittest"===e.env&&(t.startups={startupAll:{type:"worker",path:"test/feat/startup/all"},startupInstance:{type:"worker",instance:!0,path:"test/feat/startup/instance"}},t.middlewares={testInterception:{global:!1,dependencies:"instance"},testRestructuring:{global:!1,dependencies:"instance"},testInjection:{global:!1,dependencies:"instance"}},t.queues={queueTest:{path:"test/feat/queue"}}),"unittest"!==e.env&&"local"!==e.env||(t.message="Hello World",t.settings={instance:{groupInfo:{slogan:""}},user:{groupInfo:{username:"zhennann"},groupExtra:{panelExtra:{groupInfo:{mobile:"123",sex:1,language:"en-us"}}}}}),t}},function(e,t,a){e.exports={"zh-cn":a(4)}},function(e,t){e.exports={Party:"宴会",Review:"评审",Reviewing:"评审中",Reviewed:"已评审",Birthday:"生日",Dance:"跳舞",Garden:"花园",Item:"条目","Create Party":"新建宴会","Party List":"宴会列表","Level One":"层级1","Level Two":"层级2","Level Three":"层级3","Well Done":"干得好","Error Test":"错误测试","Hello World":"世界，您好"}},function(e,t){e.exports={1001:"Error Test",1002:"Incomplete Parameters"}},function(e,t,a){const s=a(7),n=a(8),i=a(9);e.exports={testInterception:s,testRestructuring:n,testInjection:i}},function(e,t){e.exports=()=>(async function(e,t){const{a:a,b:s}=e.request.body;if(void 0===a||void 0===s)return e.throw(1002);await t()})},function(e,t){e.exports=()=>(async function(e,t){const{a:a,b:s}=e.request.body;e.request.body.a=parseInt(a),e.request.body.b=parseInt(s),await t()})},function(e,t){e.exports=()=>(async function(e,t){e.meta.__plus=(e,t)=>e+t,await t()})},function(e,t,a){const s=a(11),n=a(12),i=a(13),o=a(14),r=a(15),c=a(16),m=a(17),d=a(18),l=a(19),u=a(20),h=a(21),p=a(22),x=a(23),y=a(24),g=a(25),b=a(26),w=a(27),f=a(28),T=a(29),L=a(30),C=a(31),S=a(32),I=a(33),P=a(34),A=a(35),E=a(36),k=a(37),q=a(38),v=a(39),N=a(40),R=a(41),M=a(42),O=a(43),U=a(44),_=a(45),F=a(46),B=a(48),D=a(49),J=a(50);e.exports=e=>{let t=[{method:"post",path:"version/update",controller:s,middlewares:"inner"},{method:"post",path:"version/init",controller:s,middlewares:"inner"},{method:"post",path:"version/test",controller:s,middlewares:"test"}];return(e.meta.isTest||e.meta.isLocal)&&(t=t.concat([{method:"post",path:"party/create",controller:n,middlewares:"inner",meta:{auth:{enable:!1}}},{method:"post",path:"party/read",controller:n,middlewares:"inner",meta:{auth:{enable:!1}}},{method:"post",path:"party/select",controller:n,middlewares:"inner",meta:{auth:{enable:!1}}},{method:"post",path:"party/write",controller:n,middlewares:"inner",meta:{auth:{enable:!1}}},{method:"post",path:"party/delete",controller:n,middlewares:"inner",meta:{auth:{enable:!1}}},{method:"post",path:"party/action",controller:n,middlewares:"inner",meta:{auth:{enable:!1}}},{method:"post",path:"party/enable",controller:n,middlewares:"inner",meta:{auth:{enable:!1}}},{method:"post",path:"party/types",controller:n},{method:"post",path:"partyPublic/create",controller:i,middlewares:"inner",meta:{auth:{enable:!1}}},{method:"post",path:"partyPublic/read",controller:n,middlewares:"inner",meta:{auth:{enable:!1}}},{method:"post",path:"partyPublic/select",controller:n,middlewares:"inner",meta:{auth:{enable:!1}}},{method:"post",path:"partyPublic/write",controller:i,middlewares:"inner",meta:{auth:{enable:!1}}},{method:"post",path:"partyPublic/delete",controller:i,middlewares:"inner",meta:{auth:{enable:!1}}},{method:"post",path:"partyPublic/action",controller:n,middlewares:"inner",meta:{auth:{enable:!1}}},{method:"post",path:"partyPublic/enable",controller:n,middlewares:"inner",meta:{auth:{enable:!1}}},{method:"post",path:"test/atom/starLabel",controller:o,middlewares:"test"},{method:"post",path:"test/atom/all",controller:r,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/atom/publicFlow",controller:c,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/atom/checkRightCreate",controller:m,middlewares:"test",meta:{right:{type:"atom",action:1}}},{method:"post",path:"test/atom/checkRightRead",controller:m,middlewares:"test",meta:{right:{type:"atom",action:2}}},{method:"post",path:"test/atom/checkRightWrite",controller:m,middlewares:"test",meta:{right:{type:"atom",action:3}}},{method:"post",path:"test/atom/checkRightAction",controller:m,middlewares:"test",meta:{right:{type:"atom",action:101}}},{method:"post",path:"test/function/checkRightFunctionUser",controller:d,middlewares:"test",meta:{right:{type:"function",module:"a-baseadmin",name:"user"}}},{method:"post",path:"test/function/all",controller:l,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/function/functionPublic",controller:u,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/role/userRole",controller:C,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/ctx/performAction",controller:h,middlewares:"test"},{method:"post",path:"test/ctx/performAction/echo",controller:h,middlewares:"test"},{method:"post",path:"test/ctx/transaction",controller:p,middlewares:"test,transaction"},{method:"post",path:"test/ctx/tail",controller:x,middlewares:"test"},{method:"post",path:"test/ctx/session",controller:y,middlewares:"test"},{method:"post",path:"test/ctx/session/echo1",controller:y,middlewares:"test"},{method:"post",path:"test/ctx/session/echo2",controller:y,middlewares:"test"},{method:"post",path:"test/ctx/request/:id",controller:g,action:"request",middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/ctx/requestXML",controller:g,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/ctx/response/success",controller:b,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/ctx/response/successMore",controller:b,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/ctx/response/fail",controller:b,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/ctx/response/throwError",controller:b,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/ctx/config/test",controller:w,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/ctx/locale/enus",controller:f,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/ctx/locale/zhcn",controller:f,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/event/hello",controller:S,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/event/helloEcho",controller:S,middlewares:"test,inner",meta:{auth:{enable:!1}}},{method:"post",path:"test/event/userVerify",controller:I,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/event/loginInfo",controller:I,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/cache/mem",controller:T,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/cache/db",controller:L,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/feat/httpLog",controller:P,middlewares:"test,httpLog",meta:{auth:{enable:!1}}},{method:"post",path:"test/feat/startup/all",controller:A,middlewares:"inner",meta:{instance:{enable:!1}}},{method:"post",path:"test/feat/startup/instance",controller:A,middlewares:"inner",meta:{auth:{enable:!1}}},{method:"post",path:"test/feat/sendMail",controller:E,middlewares:"test,mail",meta:{auth:{enable:!1}}},{method:"post",path:"test/feat/hook/echo",controller:k,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/feat/hook/echoBefore",controller:k,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/feat/hook/echoAfter",controller:k,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/feat/instance",controller:q,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/feat/progress",controller:v,middlewares:"progress",meta:{auth:{enable:!1}}},{method:"post",path:"test/feat/progressInBackground",controller:v,middlewares:"inner,progress",meta:{auth:{enable:!1}}},{method:"post",path:"test/feat/sequence",controller:N,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/feat/settings",controller:R,middlewares:"test"},{method:"post",path:"test/feat/status",controller:M,middlewares:"test",meta:{auth:{enable:!1}}},{method:"post",path:"test/feat/validation/success",controller:O,middlewares:"test,validate",meta:{auth:{enable:!1},validate:{validator:"userTest"}}},{method:"post",path:"test/feat/validation/fail",controller:O,middlewares:"test,validate",meta:{auth:{enable:!1},validate:{validator:"userTest"}}},{method:"post",path:"test/feat/validation/schema",controller:O,middlewares:"test,validate",meta:{auth:{enable:!1},validate:{validator:"userTest",schema:"settingsUserExtra"}}},{method:"post",path:"test/feat/middleware/interception",controller:U,middlewares:"test,testInterception"},{method:"post",path:"test/feat/middleware/restructuring",controller:U,middlewares:"test,testInterception,testRestructuring"},{method:"post",path:"test/feat/middleware/injection",controller:U,middlewares:"test,testInterception,testRestructuring,testInjection"},{method:"post",path:"test/feat/queue",controller:_,middlewares:"inner"},{method:"post",path:"test/feat/pushAsync",controller:_,middlewares:"test"},{method:"post",path:"test/feat/push",controller:_,middlewares:"test"},{method:"post",path:"kitchen-sink/guide/echo",controller:B},{method:"post",path:"kitchen-sink/guide/echo3",controller:B},{method:"post",path:"kitchen-sink/guide/echo4",controller:B},{method:"post",path:"kitchen-sink/guide/echo6",controller:B},{method:"post",path:"kitchen-sink/guide/echo7",controller:B},{method:"post",path:"kitchen-sink/guide/echo8",controller:B,middlewares:"transaction"},{method:"post",path:"kitchen-sink/guide/echo9",controller:B,meta:{right:{type:"function",name:"kitchenSink"}}},{method:"get",path:"kitchen-sink/autocomplete/languages/:query",controller:F,action:"languages",meta:{auth:{enable:!1}}},{method:"get",path:"kitchen-sink/form-schema-validation/load",controller:D},{method:"post",path:"kitchen-sink/form-schema-validation/saveSimple",controller:D},{method:"post",path:"kitchen-sink/form-schema-validation/saveValidation",controller:D,middlewares:"validate",meta:{validate:{validator:"formTest"}}},{method:"post",path:"kitchen-sink/form-captcha/signup",controller:D,middlewares:"validate,captchaVerify",meta:{validate:{validator:"formCaptchaTest"}}},{method:"post",path:"kitchen-sink/ptr-is-loadmore/list",controller:J}])),t}},function(e,t){e.exports=e=>{class t extends e.Controller{async update(){await this.service.version.update(this.ctx.request.body),this.ctx.success()}async init(){await this.service.version.init(this.ctx.request.body),this.ctx.success()}async test(){await this.service.version.test(this.ctx.request.body),this.ctx.success()}}return t}},function(e,t){e.exports=e=>{class t extends e.Controller{async create(){const e=await this.ctx.service.party.create(this.ctx.request.body);this.ctx.success(e)}async read(){const e=await this.ctx.service.party.read(this.ctx.request.body);this.ctx.success(e)}async select(){const e=await this.ctx.service.party.select(this.ctx.request.body);this.ctx.success(e)}async write(){await this.ctx.service.party.write(this.ctx.request.body),this.ctx.success()}async delete(){await this.ctx.service.party.delete(this.ctx.request.body),this.ctx.success()}async action(){const e=await this.ctx.service.party.action(this.ctx.request.body);this.ctx.success(e)}async enable(){const e=await this.ctx.service.party.enable(this.ctx.request.body);this.ctx.success(e)}async types(){const e=await this.ctx.service.party.types(this.ctx.request.body);this.ctx.success(e)}}return t}},function(e,t){e.exports=e=>{class t extends e.Controller{async create(){const e=await this.ctx.service.partyPublic.create(this.ctx.request.body);this.ctx.success(e)}async read(){const e=await this.ctx.service.party.read(this.ctx.request.body);this.ctx.success(e)}async select(){const e=await this.ctx.service.party.select(this.ctx.request.body);this.ctx.success(e)}async write(){await this.ctx.service.partyPublic.write(this.ctx.request.body),this.ctx.success()}async delete(){await this.ctx.service.partyPublic.delete(this.ctx.request.body),this.ctx.success()}async action(){const e=await this.ctx.service.party.action(this.ctx.request.body);this.ctx.success(e)}async enable(){const e=await this.ctx.service.party.enable(this.ctx.request.body);this.ctx.success(e)}}return t}},function(e,t,a){const s=a(0)("assert");e.exports=e=>{class t extends e.Controller{async starLabel(){const e=await this.ctx.meta.atomClass.get({atomClassName:"party"}),t=this.ctx.user.op,a=await this.ctx.meta.atom.create({atomClass:e,user:t});await this.ctx.meta.atom.write({key:a,item:{atomName:"test:starLabel"},user:t});let n=await this.ctx.meta.atom.read({key:a,user:t});s.equal(n.star,null),s.equal(n.labels,null),await this.ctx.meta.atom.star({key:a,atom:{star:1},user:t}),await this.ctx.meta.atom.labels({key:a,atom:{labels:[1]},user:t}),n=await this.ctx.meta.atom.read({key:a,user:t}),s.equal(n.star,1),s.equal(n.labels,"[1]");let i=await this.ctx.meta.atom.select({user:t,options:{star:1,where:{atomName:"test:starLabel"}}});s.equal(i.length,1),i=await this.ctx.meta.atom.select({user:t,options:{label:1,where:{atomName:"test:starLabel"}}}),s.equal(i.length,1),i=await this.ctx.meta.atom.select({user:t,options:{label:2,where:{atomName:"test:starLabel"}}}),s.equal(i.length,0),await this.ctx.meta.atom.star({key:a,atom:{star:0},user:t}),await this.ctx.meta.atom.labels({key:a,atom:{labels:null},user:t}),n=await this.ctx.meta.atom.read({key:a,user:t}),s.equal(n.star,null),s.equal(n.labels,null),await this.ctx.meta.atom.delete({key:a,user:t}),this.ctx.success()}}return t}},function(e,t,a){const s=a(0)("assert");e.exports=e=>{class t extends e.Controller{async all(){const e=await this.ctx.meta.atomClass.get({atomClassName:"party"}),t=this.ctx.cache.mem.get("userIds");await this._testCheckList(t,[["Tom",0],["Jane",0],["Jimmy",0],["Smith",0],["",0]],(e,t,a)=>{s.equal(e,t,a)});const a=await this.ctx.meta.atom.create({atomClass:e,user:{id:t.Tom}});await this.ctx.meta.atom.write({key:a,item:{atomName:"test:all",personCount:3},user:{id:t.Tom}}),await this._testCheckList(t,[["Tom",1],["Jane",0],["Jimmy",0],["Smith",0],["",1]],(e,t,a)=>{s.equal(e,t,a)}),await this.ctx.meta.atom.enable({key:a,atom:{atomEnabled:1},user:{id:t.Tom}}),await this._testCheckList(t,[["Tom",1],["Jane",1],["Jimmy",1],["Smith",1],["",1]],(e,t,a)=>{s.equal(e,t,a)}),await this.ctx.meta.atom.write({key:a,item:{personCount:8},user:{id:t.Tom}});const n=await this.ctx.meta.atom.read({key:a,user:{id:t.Tom}});s.equal(n.personCount,8);const i=await this.ctx.meta.atom.select({atomClass:e,options:{where:{atomName:{val:"test:all",op:"likeRight"}},orders:[["a.createdAt","desc"]],page:{index:0,size:0}},user:{id:t.Tom}});s.equal(i.length,1);const o=[["Tom",a.atomId,!0]];for(const[e,a,n]of o){const i=await this.ctx.meta.atom.checkRightRead({atom:{id:a},user:{id:t[e]}});s.equal(!!i,n,e)}const r=[["Tom",a.atomId,!0],["Tomson",a.atomId,!1]];for(const[e,a,n]of r){const i=await this.ctx.meta.atom.checkRightUpdate({atom:{id:a,action:this.ctx.constant.module("a-base").atom.action.write},user:{id:t[e]}});s.equal(!!i,n,e)}const c=[["Tom",a.atomId,!0],["Tomson",a.atomId,!1]];for(const[e,a,n]of c){const i=await this.ctx.meta.atom.checkRightUpdate({atom:{id:a,action:this.ctx.constant.module("a-base").atom.action.delete},user:{id:t[e]}});s.equal(!!i,n,e)}const m=[["Tom",!0],["Jimmy",!0],["Smith",!1]];for(const[a,n]of m){const i=await this.ctx.meta.atom.checkRightCreate({atomClass:e,user:{id:t[a]}});s.equal(!!i,n,a)}const d=[["Tom",a.atomId,!1],["Jane",a.atomId,!0]];for(const[e,a,n]of d){const i=await this.ctx.meta.atom.checkRightAction({atom:{id:a,action:101},user:{id:t[e]}});s.equal(!!i,n,e)}await this.ctx.meta.atom.action({action:101,key:a,user:{id:t.Jane}});const l=[["Tom",a.atomId,!1],["Jane",a.atomId,!1]];for(const[e,a,n]of l){const i=await this.ctx.meta.atom.checkRightAction({atom:{id:a,action:101},user:{id:t[e]}});s.equal(!!i,n,e)}await this.ctx.meta.atom.action({action:101,key:a,user:{id:t.Jane}}),await this.ctx.meta.atom.delete({key:a,user:{id:t.Tom}}),await this._testCheckList(t,[["Tom",0],["Jane",0],["Jimmy",0],["Smith",0],["",0]],(e,t,a)=>{s.equal(e,t,a)}),this.ctx.success()}async _testCheckList(e,t,a){for(const[s,n]of t){a((await this.ctx.meta.atom.select({options:{where:{atomName:"test:all","b.module":"test-party"},orders:null,page:null},user:s?{id:e[s]}:null})).length,n,s)}}}return t}},function(e,t,a){const s=a(0)("assert");e.exports=e=>{class t extends e.Controller{async publicFlow(){const e=await this.ctx.meta.atomClass.get({atomClassName:"partyPublic"}),t=this.ctx.cache.mem.get("userIds");await this._testCheckList(t,[["Tom",0],["Jane",0],["Jimmy",0],["Smith",0]],(e,t,a)=>{s.equal(e,t,a)});const a=await this.ctx.meta.atom.create({atomClass:e,user:{id:t.Tom}});await this.ctx.meta.atom.write({key:a,item:{atomName:"test:publicFlow"},user:{id:t.Tom}}),await this._testCheckList(t,[["Tom",1],["Jane",0],["Jimmy",0],["Smith",0]],(e,t,a)=>{s.equal(e,t,a)}),await this.ctx.meta.atom.enable({key:a,atom:{atomEnabled:1},user:{id:t.Tom}}),await this._testCheckList(t,[["Tom",1],["Jane",0],["Jimmy",0],["Smith",0]],(e,t,a)=>{s.equal(e,t,a)});let n=[["Jane",a.atomId,!1]];for(const[e,a,i]of n){const n=await this.ctx.meta.atom.checkRightRead({atom:{id:a},user:{id:t[e]}});s.equal(!!n,i,e)}await this.ctx.meta.atom.flow({key:a,atom:{atomFlow:0},user:{id:t.Tom}}),await this._testCheckList(t,[["Tom",1],["Jane",1],["Jimmy",1],["Smith",1]],(e,t,a)=>{s.equal(e,t,a)}),n=[["Jane",a.atomId,!0]];for(const[e,a,i]of n){const n=await this.ctx.meta.atom.checkRightRead({atom:{id:a},user:{id:t[e]}});s.equal(!!n,i,e)}const i=await this.ctx.meta.atom.read({key:a,user:{id:t.Jane}});s(i),await this.ctx.meta.atom.delete({key:a,user:{id:t.Tom}}),await this._testCheckList(t,[["Tom",0],["Jane",0],["Jimmy",0],["Smith",0]],(e,t,a)=>{s.equal(e,t,a)}),this.ctx.success()}async _testCheckList(e,t,a){for(const[s,n]of t){a((await this.ctx.meta.atom.select({options:{where:{atomName:"test:publicFlow","b.module":"test-party"},orders:null,page:null},user:{id:e[s]}})).length,n,s)}}}return t}},function(e,t){e.exports=e=>{class t extends e.Controller{async checkRightCreate(){this.ctx.success(this.ctx.meta._atomClass)}async checkRightRead(){this.ctx.success(this.ctx.meta._atom)}async checkRightWrite(){this.ctx.success(this.ctx.meta._atom)}async checkRightAction(){this.ctx.success(this.ctx.meta._atom)}}return t}},function(e,t){e.exports=e=>{class t extends e.Controller{async checkRightFunctionUser(){this.ctx.success(this.ctx.meta._function)}}return t}},function(e,t,a){const s=a(0)("assert"),n=3;e.exports=e=>{class t extends e.Controller{async all(){const e={id:this.ctx.cache.mem.get("userIds").Tom};let t=await this.ctx.meta.function.list({options:{where:{"a.module":"test-party"},orders:[["id","asc"]],page:{index:0,size:0},locale:""},user:e});s.equal(t.length,n),s(!t[0].titleLocale),t=await this.ctx.meta.function.list({options:{where:{"a.module":"test-party"},orders:[["id","asc"]],page:{index:0,size:0},locale:"zh-cn"},user:e}),s.equal(t.length,n),s.equal(!!t[0].titleLocale,!0);const a=t[0];await this.ctx.meta.function.clearLocales(),t=await this.ctx.meta.function.list({user:e,options:{where:{"a.module":"test-party"},star:1,page:{index:0,size:0}}}),s.equal(t.length,0),await this.ctx.meta.function.star({id:a.id,star:1,user:e}),t=await this.ctx.meta.function.list({user:e,options:{where:{"a.module":"test-party"},star:1,page:{index:0,size:0}}}),s.equal(t.length,1),await this.ctx.meta.function.star({id:a.id,star:0,user:e}),t=await this.ctx.meta.function.list({user:e,options:{where:{"a.module":"test-party"},star:1,page:{index:0,size:0}}}),s.equal(t.length,0),t=await this.ctx.meta.function.check({functions:[{module:a.module,name:a.name}],user:e}),s.equal(t[0].passed,!0),this.ctx.success()}}return t}},function(e,t,a){const s=a(0)("assert");e.exports=e=>{class t extends e.Controller{async functionPublic(){const e={id:this.ctx.cache.mem.get("userIds").Tom},t=await this.ctx.meta.function.checkRightFunction({function:{module:"test-party",name:"testFunctionPublic"},user:e});s.equal(!!t,!0);const a=await this.ctx.meta.function.list({options:{where:{"a.module":"test-party","a.public":1},orders:[["id","asc"]],page:{index:0,size:0},locale:""},user:e});s.equal(a.length,1),await this.ctx.model.query("delete from aFunction where id=?",[a[0].id]),this.ctx.success()}}return t}},function(e,t){e.exports=e=>{class t extends e.Controller{async performAction(){const e=this.ctx.request.body.id,t=await this.ctx.performAction({method:"post",url:"test/ctx/performAction/echo",body:{id:e}});this.ctx.success(t)}async echo(){const e=this.ctx.request.body.id;this.ctx.success(e)}}return t}},function(e,t){e.exports=e=>{class t extends e.Controller{async transaction(){const e=this.ctx.user.op,t=this.ctx.request.body.key,a=this.ctx.request.body.item;await this.ctx.meta.atom.write({key:t,item:{atomName:a.atomName},user:e}),await this.ctx.meta.atom.write({key:t,item:{personCount:a.personCount},user:e}),this.ctx.success()}}return t}},function(e,t,a){const s=a(0)("assert");e.exports=e=>{class t extends e.Controller{async tail(){this.ctx.meta._cache=1,this.ctx.tail(()=>{s.equal(this.ctx.meta._cache,2)}),this.ctx.meta._cache=2,this.ctx.success()}}return t}},function(e,t,a){const s=a(0)("assert");e.exports=e=>{class t extends e.Controller{async session(){this.ctx.session._key1=1;const e=await this.ctx.performAction({method:"post",url:"test/ctx/session/echo1"});s.equal(e.user.op.id,this.ctx.user.op.id),s.equal(e.instance.id,this.ctx.instance.id),s.equal(this.ctx.session._key2,2),this.ctx.success()}async echo1(){const e=await this.ctx.performAction({method:"post",url:"test/ctx/session/echo2"});this.ctx.success(e)}async echo2(){s.equal(this.ctx.session._key1,1),this.ctx.session._key2=2,this.ctx.success({user:this.ctx.user,instance:this.ctx.instance})}}return t}},function(e,t,a){const s=a(0)("assert");e.exports=e=>{class t extends e.Controller{async request(){s.equal(this.ctx.params.id,"1"),s.equal(this.ctx.getInt("id"),1),s.equal(this.ctx.query.age,"18"),s.equal(this.ctx.getInt("age"),18),s.equal(this.ctx.request.body.userName,"zhennann"),s.equal(this.ctx.getStr("userName"),"zhennann"),this.ctx.success()}async requestXML(){const e=await this.ctx.getPayload();this.ctx.status=200,this.ctx.type="text/xml",this.ctx.body=e.toString()}}return t}},function(e,t){e.exports=e=>{class t extends e.Controller{async success(){this.ctx.success({userName:"zhennann"})}async successMore(){const e=this.ctx.request.body.page;this.ctx.successMore([{userName:"zhennann"},{userName:"root"}],e.index,e.size)}async fail(){this.ctx.fail(1001)}async throwError(){this.ctx.throw(1001)}}return t}},function(e,t,a){const s=a(0)("assert");e.exports=e=>{class t extends e.Controller{async test(){let e=this.ctx.config.message;s.equal(e,"Hello World"),e=this.ctx.config.module("test-party").message,s.equal(e,"Hello World"),this.ctx.success()}}return t}},function(e,t,a){a(0)("assert");e.exports=e=>{class t extends e.Controller{async enus(){const e=this.ctx.config.message,t={enus:this.ctx.text(e),zhcn:this.ctx.text.locale("zh-cn",e)};this.ctx.success(t)}async zhcn(){const e=this.ctx.config.message,t={zhcn:this.ctx.text(e),enus:this.ctx.text.locale("en-us",e)};this.ctx.success(t)}}return t}},function(e,t,a){const s=a(0)("assert");e.exports=e=>{class t extends e.Controller{async mem(){const e="__test:name";this.ctx.cache.mem.set(e,"zhennann");let t=this.ctx.cache.mem.has(e);s.equal(!!t,!0);let a=this.ctx.cache.mem.get(e);var n;s.equal(a,"zhennann"),this.ctx.cache.mem.remove(e),t=this.ctx.cache.mem.has(e),s.equal(t,null),this.ctx.cache.mem.set(e,"zhennann",1e3),a=this.ctx.cache.mem.get(e),s.equal(a,"zhennann"),a=this.ctx.cache.mem.module(this.ctx.module.info.relativeName).get(e),s.equal(a,"zhennann"),await(n=1200,new Promise(e=>setTimeout(e,n))),a=this.ctx.cache.mem.get(e),s.equal(a,null),this.ctx.success()}}return t}},function(e,t,a){const s=a(0)("assert");e.exports=e=>{class t extends e.Controller{async db(){const e="__test:name";await this.ctx.cache.db.set(e,"zhennann");let t=await this.ctx.cache.db.has(e);s.equal(!!t,!0);let a=await this.ctx.cache.db.get(e);s.equal(a,"zhennann"),await this.ctx.cache.db.remove(e),t=await this.ctx.cache.db.has(e),s.equal(t,null),await this.ctx.cache.db.set(e,"zhennann",1e3),a=await this.ctx.cache.db.get(e),s.equal(a,"zhennann");const n=this.ctx.cache.db.module(this.ctx.module.info.relativeName);var i;a=await n.get(e),s.equal(a,"zhennann"),await(i=1500,new Promise(e=>setTimeout(e,i))),a=await this.ctx.cache.db.get(e),s.equal(a,void 0),this.ctx.success()}}return t}},function(e,t,a){const s=a(0)("assert");e.exports=e=>{class t extends e.Controller{async userRole(){const e=this.ctx.cache.mem.get("userIds"),t=this.ctx.cache.mem.get("roleIds");let a=await this.ctx.meta.role.getUserRolesDirect({userId:e.root});s.equal(a.length,1),a=await this.ctx.meta.role.getUserRolesParent({userId:e.root}),s.equal(a.length,3),a=await this.ctx.meta.role.getUserRolesExpand({userId:e.root}),s(a.length>3);let n=await this.ctx.meta.role.userInRoleDirect({userId:e.root,roleId:t.superuser});s.equal(n,!0),n=await this.ctx.meta.role.userInRoleParent({userId:e.root,roleId:t.root}),s.equal(n,!0),n=await this.ctx.meta.role.userInRoleExpand({userId:e.root,roleId:t.system}),s.equal(n,!0),this.ctx.success()}}return t}},function(e,t,a){const s=a(0)("assert");e.exports=e=>{const t=e.meta.mockUtil.parseInfoFromPackage(__dirname);class a extends e.Controller{async hello(){const e={text:"hello"},a=await this.ctx.meta.event.invoke({module:t.relativeName,name:"hello",data:e});s.equal(e.text,"hello echo"),s.equal(a,"returnValue"),this.ctx.success(a)}async helloEcho(){const e=this.ctx.request.body.event;this.ctx.request.body.data.text="hello echo",e.break=!0,this.ctx.success("returnValue")}}return a}},function(e,t,a){const s=a(0),n=s("extend2"),i=s("assert");e.exports=e=>{class t extends e.Controller{async userVerify(){const e=this.ctx.request.body.data;i(e.profileUser.profileId>0),this.ctx.success()}async loginInfo(){const e=this.ctx.request.body.data.info,t=e.user&&e.user.provider;t&&"a-authgithub"===t.module&&"authgithub"===t.providerName&&(e.config=n(!0,e.config,{modules:{"a-layoutmobile":{layout:{login:"/a/login/login",loginOnStart:!0,toolbar:{tabbar:!0,labels:!0,bottomMd:!0},tabs:[{name:"Mine",tabLinkActive:!0,iconMaterial:"person",url:"/a/user/user/mine"}]}}}})),this.ctx.success()}}return t}},function(e,t){e.exports=e=>{class t extends e.Controller{async httpLog(){this.ctx.success("this is a test for httpLog")}}return t}},function(e,t,a){const s=a(0)("assert");e.exports=e=>{class t extends e.Controller{async all(){console.log("test/feat/startup: all"),s.equal(this.ctx.instance,void 0),this.ctx.success()}async instance(){console.log(`test/feat/startup: instance:${this.ctx.instance.id}`),s(this.ctx.instance.id>0),this.ctx.success()}}return t}},function(e,t){e.exports=e=>{class t extends e.Controller{async sendMail(){await this.ctx.meta.mail.send({scene:"test",message:{to:"test@cabloy.com",subject:"this is a test",text:"message body!"}}),this.ctx.success()}}return t}},function(e,t,a){const s=a(0)("assert");e.exports=e=>{class t extends e.Controller{async echo(){const e=this.ctx.request.body.data;s.equal(e.text,"before"),e.text="before:echo",this.ctx.success()}async echoBefore(){this.ctx.ctxCaller.request.body.data={text:"before"},this.ctx.success()}async echoAfter(){const e=this.ctx.ctxCaller.request.body.data;s.equal(e.text,"before:echo"),this.ctx.success()}}return t}},function(e,t,a){const s=a(0)("assert");e.exports=e=>{class t extends e.Controller{async instance(){s.equal(!!this.ctx.instance.id,!0),s.equal(!!this.ctx.instance.config,!0),this.ctx.success()}}return t}},function(e,t){e.exports=e=>{class t extends e.Controller{async progress(){const e=await this.ctx.meta.progress.create();this.ctx.performActionInBackground({method:"post",url:"test/feat/progressInBackground",body:{progressId:e}}),this.ctx.success({progressId:e})}async progressInBackground(){const e=this.ctx.request.body.progressId;try{await this._levelOne({progressId:e,progressNo:0}),await this.ctx.meta.progress.done({progressId:e,message:this.ctx.text("Well Done")}),this.ctx.success(!0)}catch(t){throw await this.ctx.meta.progress.error({progressId:e,message:t.message}),t}}async _levelOne({progressId:e,progressNo:t}){let a=0;for(let s=0;s<2;s++){const n=`${this.ctx.text("Level One")}: ${s+1}`;await this.ctx.meta.progress.update({progressId:e,progressNo:t,total:2,progress:a++,text:n}),await this.ctx.meta.util.sleep(1500),await this._levelTwo({progressId:e,progressNo:t+1})}}async _levelTwo({progressId:e,progressNo:t}){let a=0;for(let s=0;s<2;s++){const n=`${this.ctx.text("Level Two")}: ${s+1}`;await this.ctx.meta.progress.update({progressId:e,progressNo:t,total:2,progress:a++,text:n}),await this.ctx.meta.util.sleep(1500),await this._levelThree({progressId:e,progressNo:t+1})}}async _levelThree({progressId:e,progressNo:t}){let a=0;for(let s=0;s<3;s++){const n=`${this.ctx.text("Level Three")}: ${s+1}`;await this.ctx.meta.progress.update({progressId:e,progressNo:t,total:3,progress:a++,text:n}),await this.ctx.meta.util.sleep(1500)}}}return t}},function(e,t,a){const s=a(0),n=s("assert"),i=s("p-map");e.exports=e=>{class t extends e.Controller{async sequence(){let e=await this.ctx.meta.sequence.current("test");n.equal(e,0);let t=await this.ctx.meta.sequence.next("test");n.equal(t,1),e=await this.ctx.meta.sequence.current("test"),n.equal(e,1),await this.ctx.meta.sequence.reset("test");const a=this.ctx.meta.sequence.module(this.ctx.module.info.relativeName);t=await a.next("test"),n.equal(t,1),e=await a.current("test"),n.equal(e,1),await a.reset("test");const s=await i([1,2,3,4,5],async()=>await a.next("test"));n.equal(s.join(","),"1,2,3,4,5"),await a.reset("test"),this.ctx.success()}}return t}},function(e,t,a){const s=a(0)("assert");e.exports=e=>{class t extends e.Controller{async settings(){let e=await this.ctx.meta.settings.getUser({name:"/groupInfo/username"});s.equal(e,"zhennann"),e=await this.ctx.meta.settings.getUser({name:"/groupExtra/panelExtra/groupInfo/language"}),s.equal(e,"en-us"),e=await this.ctx.meta.settings.loadSettingsUser(),s.equal(e.groupInfo.username,"zhennann"),e.groupExtra.panelExtra.groupInfo.language="zh-cn",await this.ctx.meta.settings.saveSettingsUser({data:e}),e=await this.ctx.meta.settings.getUser({name:"/groupExtra/panelExtra/groupInfo/language"}),s.equal(e,"zh-cn"),e=await this.ctx.meta.settings.getInstance({name:"/groupInfo/slogan"}),s.equal(e,""),e=await this.ctx.meta.settings.loadSettingsInstance(),s.equal(e.groupInfo.slogan,""),e.groupInfo.slogan="Less is more, while more is less",await this.ctx.meta.settings.saveSettingsInstance({data:e}),e=await this.ctx.meta.settings.getInstance({name:"/groupInfo/slogan"}),s.equal(e,"Less is more, while more is less"),this.ctx.success()}}return t}},function(e,t,a){const s=a(0)("assert");e.exports=e=>{class t extends e.Controller{async status(){const e="__test_enable";let t=await this.ctx.meta.status.get(e);s.equal(t,void 0),await this.ctx.meta.status.set(e,!0),t=await this.ctx.meta.status.get(e),s.equal(t,!0);const a=this.ctx.meta.status.module(this.ctx.module.info.relativeName);t=await a.get(e),s.equal(t,!0),await this.ctx.meta.status.set(e,!1),t=await this.ctx.meta.status.get(e),s.equal(t,!1),this.ctx.success()}}return t}},function(e,t){e.exports=e=>{class t extends e.Controller{async success(){this.ctx.success()}async fail(){this.ctx.success()}async schema(){this.ctx.success()}}return t}},function(e,t){e.exports=e=>{class t extends e.Controller{async interception(){const{a:e,b:t}=this.ctx.request.body,a=parseInt(e)+parseInt(t);this.ctx.success(a)}async restructuring(){const{a:e,b:t}=this.ctx.request.body,a=e+t;this.ctx.success(a)}async injection(){const{a:e,b:t}=this.ctx.request.body,a=this.ctx.meta.__plus(e,t);this.ctx.success(a)}}return t}},function(e,t,a){const s=a(0)("assert");e.exports=e=>{class t extends e.Controller{async queue(){const{a:e,b:t}=this.ctx.request.body,a=e+t;this.ctx.success(a)}async pushAsync(){const e=await this.ctx.app.meta.queue.pushAsync({subdomain:this.ctx.subdomain,module:"test-party",queueName:"queueTest",data:{a:1,b:2}});s.equal(e,3),this.ctx.success()}async push(){this.ctx.app.meta.queue.push({subdomain:this.ctx.subdomain,module:"test-party",queueName:"queueTest",data:{a:1,b:2}}),this.ctx.success()}}return t}},function(e,t,a){const s=a(47);e.exports=e=>{class t extends e.Controller{async languages(){const e=this.ctx.params.query;let t;t=e?s.filter(t=>0===t.name.toLowerCase().indexOf(e.toLowerCase())):[],this.ctx.success(t)}}return t}},function(e){e.exports=[{id:0,name:"A# .NET"},{id:1,name:"A# (Axiom)"},{id:2,name:"A-0 System"},{id:3,name:"A+"},{id:4,name:"A++"},{id:5,name:"ABAP"},{id:6,name:"ABC"},{id:7,name:"ABC ALGOL"},{id:8,name:"ABLE"},{id:9,name:"ABSET"},{id:10,name:"ABSYS"},{id:11,name:"ACC"},{id:12,name:"Accent"},{id:13,name:"Ace DASL"},{id:14,name:"ACL2"},{id:15,name:"ACT-III"},{id:16,name:"Action!"},{id:17,name:"ActionScript"},{id:18,name:"Ada"},{id:19,name:"Adenine"},{id:20,name:"Agda"},{id:21,name:"Agilent VEE"},{id:22,name:"Agora"},{id:23,name:"AIMMS"},{id:24,name:"Alef"},{id:25,name:"ALF"},{id:26,name:"ALGOL 58"},{id:27,name:"ALGOL 60"},{id:28,name:"ALGOL 68"},{id:29,name:"ALGOL W"},{id:30,name:"Alice"},{id:31,name:"Alma-0"},{id:32,name:"AmbientTalk"},{id:33,name:"Amiga E"},{id:34,name:"AMOS"},{id:35,name:"AMPL"},{id:36,name:"Apex"},{id:37,name:"APL"},{id:38,name:"App Inventor for Android's visual block language"},{id:39,name:"AppleScript"},{id:40,name:"Arc"},{id:41,name:"ARexx"},{id:42,name:"Argus"},{id:43,name:"AspectJ"},{id:44,name:"Assembly language"},{id:45,name:"ATS"},{id:46,name:"Ateji PX"},{id:47,name:"AutoHotkey"},{id:48,name:"Autocoder"},{id:49,name:"AutoIt"},{id:50,name:"AutoLISP / Visual LISP"},{id:51,name:"Averest"},{id:52,name:"AWK"},{id:53,name:"Axum"},{id:54,name:"B"},{id:55,name:"Babbage"},{id:56,name:"Bash"},{id:57,name:"BASIC"},{id:58,name:"bc"},{id:59,name:"BCPL"},{id:60,name:"BeanShell"},{id:61,name:"Batch (Windows/Dos)"},{id:62,name:"Bertrand"},{id:63,name:"BETA"},{id:64,name:"Bigwig"},{id:65,name:"Bistro"},{id:66,name:"BitC"},{id:67,name:"BLISS"},{id:68,name:"Blue"},{id:69,name:"Boo"},{id:70,name:"Boomerang"},{id:71,name:"Bourne shell"},{id:72,name:"bash"},{id:73,name:"ksh"},{id:74,name:"BREW"},{id:75,name:"BPEL"},{id:76,name:"C"},{id:77,name:"C--"},{id:78,name:"C++"},{id:79,name:"C#"},{id:80,name:"C/AL"},{id:81,name:"Caché ObjectScript"},{id:82,name:"C Shell"},{id:83,name:"Caml"},{id:84,name:"Cayenne"},{id:85,name:"CDuce"},{id:86,name:"Cecil"},{id:87,name:"Cel"},{id:88,name:"Cesil"},{id:89,name:"Ceylon"},{id:90,name:"CFEngine"},{id:91,name:"CFML"},{id:92,name:"Cg"},{id:93,name:"Ch"},{id:94,name:"Chapel"},{id:95,name:"CHAIN"},{id:96,name:"Charity"},{id:97,name:"Charm"},{id:98,name:"Chef"},{id:99,name:"CHILL"},{id:100,name:"CHIP-8"},{id:101,name:"chomski"},{id:102,name:"ChucK"},{id:103,name:"CICS"},{id:104,name:"Cilk"},{id:105,name:"CL"},{id:106,name:"Claire"},{id:107,name:"Clarion"},{id:108,name:"Clean"},{id:109,name:"Clipper"},{id:110,name:"CLIST"},{id:111,name:"Clojure"},{id:112,name:"CLU"},{id:113,name:"CMS-2"},{id:114,name:"COBOL"},{id:115,name:"Cobra"},{id:116,name:"CODE"},{id:117,name:"CoffeeScript"},{id:118,name:"Cola"},{id:119,name:"ColdC"},{id:120,name:"ColdFusion"},{id:121,name:"COMAL"},{id:122,name:"Combined Programming Language"},{id:123,name:"COMIT"},{id:124,name:"Common Intermediate Language"},{id:125,name:"Common Lisp"},{id:126,name:"COMPASS"},{id:127,name:"Component Pascal"},{id:128,name:"Constraint Handling Rules"},{id:129,name:"Converge"},{id:130,name:"Cool"},{id:131,name:"Coq"},{id:132,name:"Coral 66"},{id:133,name:"Corn"},{id:134,name:"CorVision"},{id:135,name:"COWSEL"},{id:136,name:"CPL"},{id:137,name:"csh"},{id:138,name:"CSP"},{id:139,name:"Cryptol"},{id:140,name:"Csound"},{id:141,name:"CUDA"},{id:142,name:"Curl"},{id:143,name:"Curry"},{id:144,name:"Cyclone"},{id:145,name:"Cython"},{id:146,name:"D"},{id:147,name:"DASL"},{id:148,name:"DASL"},{id:149,name:"Dart"},{id:150,name:"DataFlex"},{id:151,name:"Datalog"},{id:152,name:"DATATRIEVE"},{id:153,name:"dBase"},{id:154,name:"dc"},{id:155,name:"DCL"},{id:156,name:"Deesel"},{id:157,name:"Delphi"},{id:158,name:"DinkC"},{id:159,name:"DIBOL"},{id:160,name:"Dog"},{id:161,name:"Draco"},{id:162,name:"DRAKON"},{id:163,name:"Dylan"},{id:164,name:"DYNAMO"},{id:165,name:"E"},{id:166,name:"E#"},{id:167,name:"Ease"},{id:168,name:"Easy PL/I"},{id:169,name:"Easy Programming Language"},{id:170,name:"EASYTRIEVE PLUS"},{id:171,name:"ECMAScript"},{id:172,name:"Edinburgh IMP"},{id:173,name:"EGL"},{id:174,name:"Eiffel"},{id:175,name:"ELAN"},{id:176,name:"Elixir"},{id:177,name:"Elm"},{id:178,name:"Emacs Lisp"},{id:179,name:"Emerald"},{id:180,name:"Epigram"},{id:181,name:"EPL"},{id:182,name:"Erlang"},{id:183,name:"es"},{id:184,name:"Escher"},{id:185,name:"ESPOL"},{id:186,name:"Esterel"},{id:187,name:"Etoys"},{id:188,name:"Euclid"},{id:189,name:"Euler"},{id:190,name:"Euphoria"},{id:191,name:"EusLisp Robot Programming Language"},{id:192,name:"CMS EXEC"},{id:193,name:"EXEC 2"},{id:194,name:"Executable UML"},{id:195,name:"F"},{id:196,name:"F#"},{id:197,name:"Factor"},{id:198,name:"Falcon"},{id:199,name:"Fantom"},{id:200,name:"FAUST"},{id:201,name:"FFP"},{id:202,name:"Fjölnir"},{id:203,name:"FL"},{id:204,name:"Flavors"},{id:205,name:"Flex"},{id:206,name:"FLOW-MATIC"},{id:207,name:"FOCAL"},{id:208,name:"FOCUS"},{id:209,name:"FOIL"},{id:210,name:"FORMAC"},{id:211,name:"@Formula"},{id:212,name:"Forth"},{id:213,name:"Fortran"},{id:214,name:"Fortress"},{id:215,name:"FoxBase"},{id:216,name:"FoxPro"},{id:217,name:"FP"},{id:218,name:"FPr"},{id:219,name:"Franz Lisp"},{id:220,name:"Frege"},{id:221,name:"F-Script"},{id:222,name:"G"},{id:223,name:"Google Apps Script"},{id:224,name:"Game Maker Language"},{id:225,name:"GameMonkey Script"},{id:226,name:"GAMS"},{id:227,name:"GAP"},{id:228,name:"G-code"},{id:229,name:"Genie"},{id:230,name:"GDL"},{id:231,name:"GJ"},{id:232,name:"GEORGE"},{id:233,name:"GLSL"},{id:234,name:"GNU E"},{id:235,name:"GM"},{id:236,name:"Go"},{id:237,name:"Go!"},{id:238,name:"GOAL"},{id:239,name:"Gödel"},{id:240,name:"Godiva"},{id:241,name:"GOM (Good Old Mad)"},{id:242,name:"Goo"},{id:243,name:"Gosu"},{id:244,name:"GOTRAN"},{id:245,name:"GPSS"},{id:246,name:"GraphTalk"},{id:247,name:"GRASS"},{id:248,name:"Groovy"},{id:249,name:"Hack"},{id:250,name:"HAL/S"},{id:251,name:"Hamilton C shell"},{id:252,name:"Harbour"},{id:253,name:"Hartmann pipelines"},{id:254,name:"Haskell"},{id:255,name:"Haxe"},{id:256,name:"High Level Assembly"},{id:257,name:"HLSL"},{id:258,name:"Hop"},{id:259,name:"Hope"},{id:260,name:"Hugo"},{id:261,name:"Hume"},{id:262,name:"HyperTalk"},{id:263,name:"IBM Basic assembly language"},{id:264,name:"IBM HAScript"},{id:265,name:"IBM Informix-4GL"},{id:266,name:"IBM RPG"},{id:267,name:"ICI"},{id:268,name:"Icon"},{id:269,name:"Id"},{id:270,name:"IDL"},{id:271,name:"Idris"},{id:272,name:"IMP"},{id:273,name:"Inform"},{id:274,name:"Io"},{id:275,name:"Ioke"},{id:276,name:"IPL"},{id:277,name:"IPTSCRAE"},{id:278,name:"ISLISP"},{id:279,name:"ISPF"},{id:280,name:"ISWIM"},{id:281,name:"J"},{id:282,name:"J#"},{id:283,name:"J++"},{id:284,name:"JADE"},{id:285,name:"Jako"},{id:286,name:"JAL"},{id:287,name:"Janus"},{id:288,name:"JASS"},{id:289,name:"Java"},{id:290,name:"JavaScript"},{id:291,name:"JCL"},{id:292,name:"JEAN"},{id:293,name:"Join Java"},{id:294,name:"JOSS"},{id:295,name:"Joule"},{id:296,name:"JOVIAL"},{id:297,name:"Joy"},{id:298,name:"JScript"},{id:299,name:"JScript .NET"},{id:300,name:"JavaFX Script"},{id:301,name:"Julia"},{id:302,name:"Jython"},{id:303,name:"K"},{id:304,name:"Kaleidoscope"},{id:305,name:"Karel"},{id:306,name:"Karel++"},{id:307,name:"KEE"},{id:308,name:"Kixtart"},{id:309,name:"Klerer-May System"},{id:310,name:"KIF"},{id:311,name:"Kojo"},{id:312,name:"Kotlin"},{id:313,name:"KRC"},{id:314,name:"KRL"},{id:315,name:"KUKA"},{id:316,name:"KRYPTON"},{id:317,name:"ksh"},{id:318,name:"L"},{id:319,name:"L# .NET"},{id:320,name:"LabVIEW"},{id:321,name:"Ladder"},{id:322,name:"Lagoona"},{id:323,name:"LANSA"},{id:324,name:"Lasso"},{id:325,name:"LaTeX"},{id:326,name:"Lava"},{id:327,name:"LC-3"},{id:328,name:"Leda"},{id:329,name:"Legoscript"},{id:330,name:"LIL"},{id:331,name:"LilyPond"},{id:332,name:"Limbo"},{id:333,name:"Limnor"},{id:334,name:"LINC"},{id:335,name:"Lingo"},{id:336,name:"Linoleum"},{id:337,name:"LIS"},{id:338,name:"LISA"},{id:339,name:"Lisaac"},{id:340,name:"Lisp"},{id:341,name:"Lite-C"},{id:342,name:"Lithe"},{id:343,name:"Little b"},{id:344,name:"Logo"},{id:345,name:"Logtalk"},{id:346,name:"LotusScript"},{id:347,name:"LPC"},{id:348,name:"LSE"},{id:349,name:"LSL"},{id:350,name:"LiveCode"},{id:351,name:"LiveScript"},{id:352,name:"Lua"},{id:353,name:"Lucid"},{id:354,name:"Lustre"},{id:355,name:"LYaPAS"},{id:356,name:"Lynx"},{id:357,name:"M2001"},{id:358,name:"M4"},{id:359,name:"M#"},{id:360,name:"Machine code"},{id:361,name:"MAD"},{id:362,name:"MAD/I"},{id:363,name:"Magik"},{id:364,name:"Magma"},{id:365,name:"make"},{id:366,name:"Maple"},{id:367,name:"MAPPER"},{id:368,name:"MARK-IV"},{id:369,name:"Mary"},{id:370,name:"MASM Microsoft Assembly x86"},{id:371,name:"Mathematica"},{id:372,name:"MATLAB"},{id:373,name:"Maxima"},{id:374,name:"Macsyma"},{id:375,name:"Max"},{id:376,name:"MaxScript"},{id:377,name:"Maya (MEL)"},{id:378,name:"MDL"},{id:379,name:"Mercury"},{id:380,name:"Mesa"},{id:381,name:"Metacard"},{id:382,name:"Metafont"},{id:383,name:"Microcode"},{id:384,name:"MicroScript"},{id:385,name:"MIIS"},{id:386,name:"MillScript"},{id:387,name:"MIMIC"},{id:388,name:"Mirah"},{id:389,name:"Miranda"},{id:390,name:"MIVA Script"},{id:391,name:"ML"},{id:392,name:"Moby"},{id:393,name:"Model 204"},{id:394,name:"Modelica"},{id:395,name:"Modula"},{id:396,name:"Modula-2"},{id:397,name:"Modula-3"},{id:398,name:"Mohol"},{id:399,name:"MOO"},{id:400,name:"Mortran"},{id:401,name:"Mouse"},{id:402,name:"MPD"},{id:403,name:"CIL"},{id:404,name:"MSL"},{id:405,name:"MUMPS"},{id:406,name:"Mystic Programming Language"},{id:407,name:"NASM"},{id:408,name:"NATURAL"},{id:409,name:"Napier88"},{id:410,name:"Neko"},{id:411,name:"Nemerle"},{id:412,name:"nesC"},{id:413,name:"NESL"},{id:414,name:"Net.Data"},{id:415,name:"NetLogo"},{id:416,name:"NetRexx"},{id:417,name:"NewLISP"},{id:418,name:"NEWP"},{id:419,name:"Newspeak"},{id:420,name:"NewtonScript"},{id:421,name:"NGL"},{id:422,name:"Nial"},{id:423,name:"Nice"},{id:424,name:"Nickle"},{id:425,name:"Nim"},{id:426,name:"NPL"},{id:427,name:"Not eXactly C"},{id:428,name:"Not Quite C"},{id:429,name:"NSIS"},{id:430,name:"Nu"},{id:431,name:"NWScript"},{id:432,name:"NXT-G"},{id:433,name:"o:XML"},{id:434,name:"Oak"},{id:435,name:"Oberon"},{id:436,name:"OBJ2"},{id:437,name:"Object Lisp"},{id:438,name:"ObjectLOGO"},{id:439,name:"Object REXX"},{id:440,name:"Object Pascal"},{id:441,name:"Objective-C"},{id:442,name:"Objective-J"},{id:443,name:"Obliq"},{id:444,name:"OCaml"},{id:445,name:"occam"},{id:446,name:"occam-π"},{id:447,name:"Octave"},{id:448,name:"OmniMark"},{id:449,name:"Onyx"},{id:450,name:"Opa"},{id:451,name:"Opal"},{id:452,name:"OpenCL"},{id:453,name:"OpenEdge ABL"},{id:454,name:"OPL"},{id:455,name:"OPS5"},{id:456,name:"OptimJ"},{id:457,name:"Orc"},{id:458,name:"ORCA/Modula-2"},{id:459,name:"Oriel"},{id:460,name:"Orwell"},{id:461,name:"Oxygene"},{id:462,name:"Oz"},{id:463,name:"P′′"},{id:464,name:"P#"},{id:465,name:"ParaSail (programming language)"},{id:466,name:"PARI/GP"},{id:467,name:"Pascal"},{id:468,name:"PCASTL"},{id:469,name:"PCF"},{id:470,name:"PEARL"},{id:471,name:"PeopleCode"},{id:472,name:"Perl"},{id:473,name:"PDL"},{id:474,name:"Perl6"},{id:475,name:"PHP"},{id:476,name:"Phrogram"},{id:477,name:"Pico"},{id:478,name:"Picolisp"},{id:479,name:"Pict"},{id:480,name:"Pike"},{id:481,name:"PIKT"},{id:482,name:"PILOT"},{id:483,name:"Pipelines"},{id:484,name:"Pizza"},{id:485,name:"PL-11"},{id:486,name:"PL/0"},{id:487,name:"PL/B"},{id:488,name:"PL/C"},{id:489,name:"PL/I"},{id:490,name:"PL/M"},{id:491,name:"PL/P"},{id:492,name:"PL/SQL"},{id:493,name:"PL360"},{id:494,name:"PLANC"},{id:495,name:"Plankalkül"},{id:496,name:"Planner"},{id:497,name:"PLEX"},{id:498,name:"PLEXIL"},{id:499,name:"Plus"},{id:500,name:"POP-11"},{id:501,name:"PostScript"},{id:502,name:"PortablE"},{id:503,name:"Powerhouse"},{id:504,name:"PowerBuilder"},{id:505,name:"PowerShell"},{id:506,name:"PPL"},{id:507,name:"Processing"},{id:508,name:"Processing.js"},{id:509,name:"Prograph"},{id:510,name:"PROIV"},{id:511,name:"Prolog"},{id:512,name:"PROMAL"},{id:513,name:"Promela"},{id:514,name:"PROSE modeling language"},{id:515,name:"PROTEL"},{id:516,name:"ProvideX"},{id:517,name:"Pro*C"},{id:518,name:"Pure"},{id:519,name:"Python"},{id:520,name:"Q (equational programming language)"},{id:521,name:"Q (programming language from Kx Systems)"},{id:522,name:"Qalb"},{id:523,name:"QtScript"},{id:524,name:"QuakeC"},{id:525,name:"QPL"},{id:526,name:"R"},{id:527,name:"R++"},{id:528,name:"Racket"},{id:529,name:"RAPID"},{id:530,name:"Rapira"},{id:531,name:"Ratfiv"},{id:532,name:"Ratfor"},{id:533,name:"rc"},{id:534,name:"REBOL"},{id:535,name:"Red"},{id:536,name:"Redcode"},{id:537,name:"REFAL"},{id:538,name:"Reia"},{id:539,name:"Revolution"},{id:540,name:"rex"},{id:541,name:"REXX"},{id:542,name:"Rlab"},{id:543,name:"ROOP"},{id:544,name:"RPG"},{id:545,name:"RPL"},{id:546,name:"RSL"},{id:547,name:"RTL/2"},{id:548,name:"Ruby"},{id:549,name:"RuneScript"},{id:550,name:"Rust"},{id:551,name:"S"},{id:552,name:"S2"},{id:553,name:"S3"},{id:554,name:"S-Lang"},{id:555,name:"S-PLUS"},{id:556,name:"SA-C"},{id:557,name:"SabreTalk"},{id:558,name:"SAIL"},{id:559,name:"SALSA"},{id:560,name:"SAM76"},{id:561,name:"SAS"},{id:562,name:"SASL"},{id:563,name:"Sather"},{id:564,name:"Sawzall"},{id:565,name:"SBL"},{id:566,name:"Scala"},{id:567,name:"Scheme"},{id:568,name:"Scilab"},{id:569,name:"Scratch"},{id:570,name:"Script.NET"},{id:571,name:"Sed"},{id:572,name:"Seed7"},{id:573,name:"Self"},{id:574,name:"SenseTalk"},{id:575,name:"SequenceL"},{id:576,name:"SETL"},{id:577,name:"SIMPOL"},{id:578,name:"SIGNAL"},{id:579,name:"SiMPLE"},{id:580,name:"SIMSCRIPT"},{id:581,name:"Simula"},{id:582,name:"Simulink"},{id:583,name:"SISAL"},{id:584,name:"SLIP"},{id:585,name:"SMALL"},{id:586,name:"Smalltalk"},{id:587,name:"Small Basic"},{id:588,name:"SML"},{id:589,name:"Snap!"},{id:590,name:"SNOBOL"},{id:591,name:"SPITBOL"},{id:592,name:"Snowball"},{id:593,name:"SOL"},{id:594,name:"Span"},{id:595,name:"SPARK"},{id:596,name:"Speedcode"},{id:597,name:"SPIN"},{id:598,name:"SP/k"},{id:599,name:"SPS"},{id:600,name:"SQR"},{id:601,name:"Squeak"},{id:602,name:"Squirrel"},{id:603,name:"SR"},{id:604,name:"S/SL"},{id:605,name:"Stackless Python"},{id:606,name:"Starlogo"},{id:607,name:"Strand"},{id:608,name:"Stata"},{id:609,name:"Stateflow"},{id:610,name:"Subtext"},{id:611,name:"SuperCollider"},{id:612,name:"SuperTalk"},{id:613,name:"Swift (Apple programming language)"},{id:614,name:"Swift (parallel scripting language)"},{id:615,name:"SYMPL"},{id:616,name:"SyncCharts"},{id:617,name:"SystemVerilog"},{id:618,name:"T"},{id:619,name:"TACL"},{id:620,name:"TACPOL"},{id:621,name:"TADS"},{id:622,name:"TAL"},{id:623,name:"Tcl"},{id:624,name:"Tea"},{id:625,name:"TECO"},{id:626,name:"TELCOMP"},{id:627,name:"TeX"},{id:628,name:"TEX"},{id:629,name:"TIE"},{id:630,name:"Timber"},{id:631,name:"TMG"},{id:632,name:"Tom"},{id:633,name:"TOM"},{id:634,name:"TouchDevelop"},{id:635,name:"Topspeed"},{id:636,name:"TPU"},{id:637,name:"Trac"},{id:638,name:"TTM"},{id:639,name:"T-SQL"},{id:640,name:"TTCN"},{id:641,name:"Turing"},{id:642,name:"TUTOR"},{id:643,name:"TXL"},{id:644,name:"TypeScript"},{id:645,name:"Turbo C++"},{id:646,name:"Ubercode"},{id:647,name:"UCSD Pascal"},{id:648,name:"Umple"},{id:649,name:"Unicon"},{id:650,name:"Uniface"},{id:651,name:"UNITY"},{id:652,name:"Unix shell"},{id:653,name:"UnrealScript"},{id:654,name:"Vala"},{id:655,name:"VBA"},{id:656,name:"VBScript"},{id:657,name:"Verilog"},{id:658,name:"VHDL"},{id:659,name:"Visual Basic"},{id:660,name:"Visual Basic .NET"},{id:661,name:"Visual DataFlex"},{id:662,name:"Visual DialogScript"},{id:663,name:"Visual Fortran"},{id:664,name:"Visual FoxPro"},{id:665,name:"Visual J++"},{id:666,name:"Visual J#"},{id:667,name:"Visual Objects"},{id:668,name:"Visual Prolog"},{id:669,name:"VSXu"},{id:670,name:"vvvv"},{id:671,name:"WATFIV, WATFOR"},{id:672,name:"WebDNA"},{id:673,name:"WebQL"},{id:674,name:"Windows PowerShell"},{id:675,name:"Winbatch"},{id:676,name:"Wolfram Language"},{id:677,name:"Wyvern"},{id:678,name:"X++"},{id:679,name:"X#"},{id:680,name:"X10"},{id:681,name:"XBL"},{id:682,name:"XC"},{id:683,name:"XMOS architecture"},{id:684,name:"xHarbour"},{id:685,name:"XL"},{id:686,name:"Xojo"},{id:687,name:"XOTcl"},{id:688,name:"XPL"},{id:689,name:"XPL0"},{id:690,name:"XQuery"},{id:691,name:"XSB"},{id:692,name:"XSLT"},{id:693,name:"XPath"},{id:694,name:"Xtend"},{id:695,name:"Yorick"},{id:696,name:"YQL"},{id:697,name:"Z notation"},{id:698,name:"Zeno"},{id:699,name:"ZOPL"},{id:700,name:"ZPL"}]},function(e,t){e.exports=e=>{class t extends e.Controller{async echo(){this.ctx.success("Hello World")}async echo2(){const e=this.ctx.config.message;this.ctx.success(e)}async echo3(){const e=this.ctx.text("Hello World");this.ctx.success(e)}async echo4(){const{message:e,markCount:t}=this.ctx.request.body,a=`${e}${new Array(t+1).join("!")}`;this.ctx.success(a)}async echo6(){const e=(await this.ctx.db.insert("testParty",{iid:this.ctx.instance.id,deleted:0,personCount:3})).insertId;await this.ctx.db.update("testParty",{id:e,personCount:5});const t=await this.ctx.db.get("testParty",{id:e});await this.ctx.db.delete("testParty",{id:e}),this.ctx.success(t)}async echo7(){const e=(await this.ctx.model.party.insert({personCount:3})).insertId;await this.ctx.model.party.update({id:e,personCount:6});const t=await this.ctx.model.party.get({id:e});await this.ctx.model.party.delete({id:e}),this.ctx.success(t)}async echo8(){const e=(await this.ctx.model.party.insert({personCount:3})).insertId;await this.ctx.model.party.update({id:e,personCountA:6}),this.ctx.success()}async echo9(){this.ctx.success("ok")}}return t}},function(e,t){e.exports=e=>{class t extends e.Controller{async load(){const e=this._getCacheName();let t=await this.ctx.cache.db.get(e);t||(t={userName:"",password:"",passwordAgain:"",sex:0,language:"",avatar:"",rememberMe:!1}),this.ctx.success(t)}async saveSimple(){const e=this.ctx.request.body.data,t=this._getCacheName();await this.ctx.cache.db.set(t,e),this.ctx.success()}async saveValidation(){await this.saveSimple()}signup(){this.ctx.success()}_getCacheName(){return`__formTest:${this.ctx.user.op.id}`}}return t}},function(e,t){const a=89;e.exports=e=>{class t extends e.Controller{async list(){let e=this.ctx.request.body.page;e=this.ctx.meta.util.page(e,!1);const t=[];for(let s=0;s<e.size;s++){const n=e.index+s+1;if(n>a)break;t.push({id:n,title:`${this.ctx.text("Item")} - ${n}`})}this.ctx.successMore(t,e.index,e.size)}}return t}},function(e,t,a){const s=a(52),n=a(55),i=a(56);e.exports=e=>{const t={version:s};return(e.meta.isTest||e.meta.isLocal)&&Object.assign(t,{party:n,partyPublic:i}),t}},function(e,t,a){const s=a(53);e.exports=e=>{class t extends e.Service{async update(e){if((this.app.meta.isTest||this.app.meta.isLocal)&&1===e.version){let e="\n          CREATE TABLE testParty (\n            id int(11) NOT NULL AUTO_INCREMENT,\n            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n            deleted int(11) DEFAULT '0',\n            iid int(11) DEFAULT '0',\n            atomId int(11) DEFAULT '0',\n            personCount int(11) DEFAULT '0',\n            partyTypeId int(11) DEFAULT '0',\n            PRIMARY KEY (id)\n          )\n        ";await this.ctx.model.query(e),e="\n          CREATE TABLE testPartyType (\n            id int(11) NOT NULL AUTO_INCREMENT,\n            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n            deleted int(11) DEFAULT '0',\n            iid int(11) DEFAULT '0',\n            name varchar(255) DEFAULT NULL,\n            PRIMARY KEY (id)\n          )\n        ",await this.ctx.model.query(e),e="\n          CREATE VIEW testPartyView as\n            select a.*,b.name as partyTypeName from testParty a\n              left join testPartyType b on a.partyTypeId=b.id\n        ",await this.ctx.model.query(e),e="\n          CREATE TABLE testPartyPublic (\n            id int(11) NOT NULL AUTO_INCREMENT,\n            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n            deleted int(11) DEFAULT '0',\n            iid int(11) DEFAULT '0',\n            atomId int(11) DEFAULT '0',\n            PRIMARY KEY (id)\n          )\n        ",await this.ctx.model.query(e)}}async init(e){if(this.app.meta.isTest||this.app.meta.isLocal){if(1===e.version)for(const e of["Birthday","Dance","Garden"])await this.ctx.model.partyType.insert({name:e});if(e.version,3===e.version){await this.ctx.meta.function.delete({name:"kichenSink"});const e=[{roleName:"root",name:"kitchenSink"}];await this.ctx.meta.role.addRoleFunctionBatch({roleFunctions:e})}if(4===e.version){const e=[{roleName:"system",action:"create"},{roleName:"system",action:"write",scopeNames:0},{roleName:"system",action:"delete",scopeNames:0},{roleName:"system",action:"read",scopeNames:"authenticated"},{roleName:"system",action:"review",scopeNames:"authenticated"}];await this.ctx.meta.role.addRoleRightBatch({atomClassName:"party",roleRights:e})}}}async test(){const e=new(s(this.ctx));await e.run()}}return t}},function(e,t,a){const s=a(54);e.exports=function(e){return class{async run(){const t=await this._testRoles();await this._testRoleIncs(t),await e.meta.role.setDirty(!0);const a=await this._testUsers(t);await this._testRoleRights(t),this._testCache(t,a)}_testCache(t,a){e.cache.mem.set("roleIds",t),e.cache.mem.set("userIds",a)}async _testRoles(){const t={};for(const a of e.constant.module("a-base").systemRoles){const s=await e.meta.role.getSystemRole({roleName:a});t[a]=s.id}for(const[a,n,i,o]of s.roles)t[a]=await e.meta.role.add({roleName:a,leader:n,catalog:i,roleIdParent:t[o]});return t}async _testRoleIncs(t){for(const[a,n]of s.roleIncs)await e.meta.role.addRoleInc({roleId:t[a],roleIdInc:t[n]})}async _testUsers(t){const a={};for(const[n,i]of s.users)a[n]=await e.meta.user.add({userName:n,realName:n}),await e.meta.user.save({user:{id:a[n],activated:1}}),await e.meta.role.addUserRole({userId:a[n],roleId:t[i]});await this._testAuths(a);const n=await e.meta.user.get({userName:"root"});return a.root=n.id,a}async _testRoleRights(){await e.meta.role.addRoleRightBatch({atomClassName:"party",roleRights:s.roleRights})}async _testAuths(t){for(const a in t)await e.performAction({method:"post",url:"/a/authsimple/auth/add",body:{userId:t[a],password:""}})}}}},function(e,t){e.exports={roles:[["friend",0,0,"external"],["consultant",0,1,"external"],["study",0,0,"consultant"],["work",0,0,"consultant"],["life",0,0,"consultant"],["family",0,1,"internal"],["father",0,0,"family"],["mother",1,0,"family"],["son",0,0,"family"],["daughter",0,0,"family"]],roleIncs:[["friend","family"]],users:[["Tom","father"],["Jane","mother"],["Tomson","son"],["Jannie","daughter"],["Jimmy","friend"],["Rose","friend"],["Smith","life"]],roleRights:[{roleName:"family",action:"create"},{roleName:"family",action:"read",scopeNames:"family"},{roleName:"mother",action:"review",scopeNames:"family"},{roleName:"authenticated",action:"write",scopeNames:0},{roleName:"authenticated",action:"delete",scopeNames:0},{roleName:"consultant",action:"read",scopeNames:"family"}]}},function(e,t){e.exports=e=>{const t={Birthday:"🎂",Dance:"💃",Garden:"🏡"};class a extends e.Service{async create({atomClass:e,key:t,item:a,user:s}){const n=await this.ctx.model.party.insert({atomId:t.atomId});return{atomId:t.atomId,itemId:n.insertId}}_getMeta(e){const a=[];let s;e.personCount&&a.push(e.personCount),e.partyTypeName&&(s=`${t[e.partyTypeName]}${this.ctx.text(e.partyTypeName)}`);const n={flags:a,summary:s};e._meta=n}async read({atomClass:e,key:t,item:a,user:s}){this._getMeta(a)}async select({atomClass:e,options:t,items:a,user:s}){for(const e of a)this._getMeta(e)}async write({atomClass:e,key:t,item:a,user:s}){await this.ctx.model.party.update({id:t.itemId,personCount:a.personCount,partyTypeId:a.partyTypeId})}async delete({atomClass:e,key:t,user:a}){await this.ctx.model.party.delete({id:t.itemId})}async action({action:e,atomClass:t,key:a,user:s}){101===e&&await this.ctx.meta.atom.flag({key:a,atom:{atomFlag:2},user:s})}async enable({atomClass:e,key:t,atom:a,user:s}){const n=a.atomEnabled?1:0;await this.ctx.meta.atom.flag({key:t,atom:{atomFlag:n},user:s})}async types({empty:e}){return(await this.ctx.model.partyType.select()).map(e=>({id:e.id,name:this.ctx.text(e.name)}))}}return a}},function(e,t){e.exports=e=>{class t extends e.Service{async create({atomClass:e,key:t,item:a,user:s}){const n=await this.ctx.model.partyPublic.insert({atomId:t.atomId});return{atomId:t.atomId,itemId:n.insertId}}async read({atomClass:e,key:t,item:a,user:s}){}async select({atomClass:e,options:t,items:a,user:s}){}async write({atomClass:e,key:t,item:a,user:s}){}async delete({atomClass:e,key:t,user:a}){await this.ctx.model.partyPublic.delete({id:t.itemId})}async action({action:e,atomClass:t,key:a,user:s}){}async enable({atomClass:e,key:t,atom:a,user:s}){}}return t}},function(e,t,a){const s=a(58),n=a(59),i=a(60);e.exports=e=>{const t={};return(e.meta.isTest||e.meta.isLocal)&&Object.assign(t,{party:s,partyType:n,partyPublic:i}),t}},function(e,t){e.exports=e=>{class t extends e.meta.Model{constructor(e){super(e,{table:"testParty",options:{disableDeleted:!1}})}}return t}},function(e,t){e.exports=e=>{class t extends e.meta.Model{constructor(e){super(e,{table:"testPartyType",options:{disableDeleted:!0}})}}return t}},function(e,t){e.exports=e=>{class t extends e.meta.Model{constructor(e){super(e,{table:"testPartyPublic",options:{disableDeleted:!1}})}}return t}},function(e,t,a){const s=a(0)("extend2");e.exports=e=>{const t={};if(e.meta.isTest||e.meta.isLocal){const n=a(62)(e),i=a(63)(e);s(!0,t,{base:{atoms:{party:{info:{title:"Party",tableName:"testPartyView",flow:0},actions:{review:{code:101,title:"Review",flag:"1"}},flags:{1:{title:"Reviewing"},2:{title:"Reviewed"}},validator:"party",search:{validator:"partySearch"}}},functions:{createParty:{title:"Create Party",scene:"create",autoRight:1,atomClassName:"party",action:"create",sorting:1,menu:1},listParty:{title:"Party List",scene:"list",autoRight:1,atomClassName:"party",action:"read",sorting:1,menu:1},kitchenSink:{title:"Kitchen-sink",scene:"tools",actionPath:"kitchen-sink/index",sorting:1,menu:1}}},validation:{validators:{party:{schemas:"party"},partySearch:{schemas:"partySearch"},userTest:{schemas:"settingsUser,settingsUserExtra"},instanceTest:{schemas:"settingsInstance"},formTest:{schemas:"formTest"},formCaptchaTest:{schemas:"formCaptchaTest"}},keywords:{"x-languages":i.languages},schemas:{party:n.party,partySearch:n.partySearch,settingsUser:n.settingsUser,settingsUserExtra:n.settingsUserExtra,settingsInstance:n.settingsInstance,formTest:n.formTest,formCaptchaTest:n.formCaptchaTest}},settings:{user:{validator:"userTest"},instance:{validator:"instanceTest"}},index:{indexes:{testParty:"createdAt,updatedAt,atomId,partyTypeId"}}})}return e.meta.isTest&&s(!0,t,{base:{atoms:{partyPublic:{info:{tableName:"testPartyPublic",public:1,flow:1}}},functions:{testFunctionPublic:{scene:"tools",menu:1,public:1}}},event:{declarations:{hello:"This is a test for event"},implementations:{"test-party:hello":"test/event/helloEcho","a-base:userVerify":"test/event/userVerify","a-base:loginInfo":"test/event/loginInfo"}},hook:{before:[{path:"/test/party/test/feat/hook/echo",route:"test/feat/hook/echoBefore"}],after:[{path:"/test/party/test/feat/hook/echo",route:"test/feat/hook/echoAfter"}]},sequence:{providers:{test:{start:0,expression:({ctx:e,value:t})=>++t}}}}),t}},function(e,t){e.exports=e=>{const t={party:{type:"object",properties:{atomName:{type:"string",ebType:"text",ebTitle:"Party Name",notEmpty:!0},personCount:{type:"number",ebType:"text",ebTitle:"Person Count",notEmpty:!0},partyTypeId:{type:"number",ebType:"select",ebTitle:"Party Type",ebOptionsUrl:"/test/party/party/types",ebOptionTitleKey:"name",ebOptionValueKey:"id",ebOptionsBlankAuto:!0,notEmpty:!0}}},partySearch:{type:"object",properties:{partyTypeId:{type:"number",ebType:"select",ebTitle:"Party Type",ebOptionsUrl:"/test/party/party/types",ebOptionTitleKey:"name",ebOptionValueKey:"id",ebOptionsBlankAuto:!0}}},settingsUser:{type:"object",properties:{groupInfo:{type:"object",ebType:"group",ebTitle:"Info Group",properties:{username:{type:"string",ebType:"text",ebTitle:"My Name",notEmpty:!0}}},groupExtra:{type:"object",ebType:"group",ebTitle:"Extra Group",properties:{panelExtra:{ebType:"panel",ebTitle:"Extra",$ref:"settingsUserExtra"}}}}},settingsUserExtra:{type:"object",ebTitle:"Extra",properties:{groupInfo:{type:"object",ebType:"group",ebTitle:"Info Group",properties:{mobile:{type:"string",ebType:"text",ebTitle:"Mobile",notEmpty:!0},sex:{type:"number",ebType:"select",ebTitle:"Sex",ebMultiple:!1,ebOptions:[{title:"Male",value:1},{title:"Female",value:2}],ebParams:{openIn:"page",closeOnSelect:!0},notEmpty:!0},language:{type:"string",ebType:"select",ebTitle:"Language",ebOptionsUrl:"/a/base/base/locales",ebOptionsUrlParams:null,"x-languages":!0,notEmpty:!0}}}}},settingsInstance:{type:"object",properties:{groupInfo:{type:"object",ebType:"group",ebTitle:"Info Group",properties:{slogan:{type:"string",ebType:"text",ebTitle:"Slogan",notEmpty:!0}}}}},formTest:{type:"object",properties:{userName:{type:"string",ebType:"text",ebTitle:"Username",notEmpty:!0},password:{type:"string",ebType:"text",ebTitle:"Password",ebSecure:!0,notEmpty:!0,minLength:6},passwordAgain:{type:"string",ebType:"text",ebTitle:"Password again",ebSecure:!0,notEmpty:!0,const:{$data:"1/password"}},sex:{type:"number",ebType:"select",ebTitle:"Sex",ebMultiple:!1,ebOptions:[{title:"Male",value:1},{title:"Female",value:2}],ebOptionsBlankAuto:!0,ebParams:{openIn:"page",closeOnSelect:!0},notEmpty:!0},language:{type:"string",ebType:"select",ebTitle:"Language",ebOptionsUrl:"/a/base/base/locales",ebOptionsUrlParams:null,ebOptionsBlankAuto:!0,"x-languages":!0,notEmpty:!0},avatar:{type:"string",ebType:"file",ebTitle:"Avatar",ebParams:{mode:1},notEmpty:!0},rememberMe:{type:"boolean",ebType:"toggle",ebTitle:"Remember me"}}},formCaptchaTest:{type:"object",properties:{userName:{type:"string",ebType:"text",ebTitle:"Username",notEmpty:!0},password:{type:"string",ebType:"text",ebTitle:"Password",ebSecure:!0,notEmpty:!0,minLength:6}}}};return t}},function(e,t,a){const s=a(0)("ajv");e.exports=e=>{const t={};return t.languages={async:!0,type:"string",errors:!0,compile(e,t){const a=async function(e){const t=this,a=arguments.callee.context,n=await t.performAction({method:"post",url:a.parentSchema.ebOptionsUrl,body:a.parentSchema.ebOptionsUrlParams}),i=n.findIndex(t=>t.value===e);if(i>-1)return!0;const o=[{keyword:"x-languages",params:[],message:t.text("Not expected value")}];throw new s.ValidationError(o)};return a.context={sch:e,parentSchema:t},a}},t}}]);
//# sourceMappingURL=backend.js.map